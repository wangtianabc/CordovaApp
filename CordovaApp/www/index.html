<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--
    必要时在以下 META 标记中自定义内容安全策略。将 "unsafe-inline" 添加到 default-src 以启动内联 JavaScript。
    有关详细信息，请参阅 http://go.microsoft.com/fwlink/?LinkID=617521
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: http://api.openweathermap.org https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">
    -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="css/scrollbar.css">
    <title>CordovaApp</title>
</head>
<body>
    <!--主页-->
    <div data-role="page" id="home" data-footer="common/footer.html">
        <div data-role="header" data-position="fixed">
            <h1>CordovaApp</h1>
            <a href="#" class="ui-btn ui-btn-right ui-btn-corner-all ui-icon-gear ui-btn-icon-notext" data-transition="slideup" id="test"></a>
        </div>
        <div data-role="content" data-fullscreen="true">
            <div id="wrapper">
                <div id="scroller">
                    <div id="pullDown">
                        <span class="pullDownIcon"></span><span class="pullDownLabel">下拉刷新...</span>
                    </div>
                    <div id="contentlistc">
                        <ul data-role="listview" data-inset="true" id="datalist"></ul>
                    </div>
                    <div id="pullUp">
                        <span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    <div data-role="page" id="detail">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-left ui-icon-back ui-btn-icon-notext">Cancel</a>
            <h1>详细信息</h1>
        </div>
        <div data-role="content" id="contentDetail">

        </div>
    </div>
    <div data-role="page" id="user" data-footer="common/footer.html">
        <div data-role="header" data-position="fixed">
            <h1>用户信息</h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" data-divider-theme="a">
                <li>
                    <a href="#">
                        <img src="images/cordova.png">
                        <h2>孩子爸爸：张三</h2>
                        <p>账号：123456789</p>
                    </a>
                </li>
                <li data-role="list-divider"></li>
                <li><a href="#">我的二维码</a></li>
                <li><a href="#">邀请家人</a></li>
                <li><a href="#">土宝卡号</a></li>
                <li><a href="#">我的关注</a></li>
                <li data-role="list-divider"></li>
                <li><a href="#">帮助与反馈</a></li>
                <li><a href="#">设置</a></li>
            </ul>
        </div>
    </div>
    <!--<script src="scripts/jquery-1.12.4.min.js"></script>
    <script src="scripts/jquery.mobile-1.4.5.min.js"></script>
    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>
    <script src="scripts/index.js"></script>
    <script src="scripts/template-debug.js"></script>
    <script src="scripts/iscroll.js"></script>
    <script src="scripts/iscroll-probe.js"></script>-->
    <!--RequireJS-->
    <script src="scripts/require.js" data-main="scripts/main"></script>
    <!--列表实时注入/渲染模板-->
    <script id="contentlist" type="text/html">
        {{each list as value i}}
        <li data-role="list-divider">{{value.date}}<span class="ui-li-count">{{value.content.length}}</span></li>
            {{each value.content as value1 as j}}
            <li>
                <a data-role="button" data-prefetch="true" onclick="getdetail({{value1.id}})">
                    <img src={{value1.imgurl}} class="ui-corner-all">
                    <h2>{{value1.title}}</h2>
                    <p><strong>{{value1.desc}}</strong></p>
                    <p>{{value1.contenttext}}</p>
                    <p class="ui-li-aside"><strong>{{value1.time}}</strong>PM</p>

                </a>
            </li>
            {{/each}}
        {{/each}}
    </script>

    <!--页面内容数据注入-->
    <script id="contentdesc" type="text/html">
        <h1>{{title}}</h1>
        <h3>{{content}}</h3>
    </script>

    <script type="text/javascript">
        function getdetail(id) {
            require(['index'], function (index) {
                index.getdetail(id);
            });
        }
    </script>
</body>
</html>